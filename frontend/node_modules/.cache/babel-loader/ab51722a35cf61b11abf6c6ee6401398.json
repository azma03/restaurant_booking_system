{"ast":null,"code":"import _classCallCheck from \"/Users/andrewbrown/Documents/codeclan_work/week_14/day_5/Project/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/andrewbrown/Documents/codeclan_work/week_14/day_5/Project/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/andrewbrown/Documents/codeclan_work/week_14/day_5/Project/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/andrewbrown/Documents/codeclan_work/week_14/day_5/Project/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/andrewbrown/Documents/codeclan_work/week_14/day_5/Project/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/andrewbrown/Documents/codeclan_work/week_14/day_5/Project/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/andrewbrown/Documents/codeclan_work/week_14/day_5/Project/restaurant_booking_system/frontend/src/components/Customers/SingleCustomer.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n\nvar SingleCustomer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SingleCustomer, _Component);\n\n  function SingleCustomer(props) {\n    var _this;\n\n    _classCallCheck(this, SingleCustomer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SingleCustomer).call(this, props));\n    _this.state = {\n      totalSpend: \"\",\n      visitCount: \"\",\n      discountLevel: \"\"\n    };\n    _this.onDelete = _this.onDelete.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.totalSpendings = _this.totalSpendings.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.totalVisits = _this.totalVisits.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.discountLevel = _this.discountLevel.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(SingleCustomer, [{\n    key: \"onDelete\",\n    value: function onDelete() {\n      this.props.handlesDelete(this.props.customer.id);\n    }\n  }, {\n    key: \"totalSpendings\",\n    value: function totalSpendings() {\n      var _this2 = this;\n\n      // let totalSpend;\n      var request1 = new Request();\n      request1.get('api/customers/' + this.props.customer.id + '/totalSpendings').then(function (data) {\n        _this2.setState({\n          totalSpend: data\n        }); // return totalSpend;\n\n      });\n    }\n  }, {\n    key: \"totalVisits\",\n    value: function totalVisits() {\n      var _this3 = this;\n\n      // let visitCount;\n      var request2 = new Request();\n      request2.get('api/customers/' + this.props.customer.id + '/visitCount').then(function (data) {\n        _this3.setState({\n          visitCount: data\n        }); // return visitCount;\n\n      });\n    }\n  }, {\n    key: \"discountLevel\",\n    value: function discountLevel() {\n      // let visits = totalVisits();\n      var visits = this.state.visitCount;\n\n      if (visits > 10) {\n        this.setState({\n          discountLevel: \"gold\"\n        }); // discountLevel = \"gold\"\n      } else if (visits > 5) {\n        this.setState({\n          discountLevel: \"silver\"\n        });\n      } else {\n        this.setState({\n          discountLevel: \"bronze\"\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.props.customer) {\n        return null;\n      }\n\n      var bookings = this.props.customer.bookings.map(function (booking, index) {\n        return React.createElement(\"li\", {\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, booking.date);\n      });\n      return React.createElement(\"div\", {\n        className: \"component\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"Name: \", this.props.customer.name), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, \"Phone: \", this.props.customer.phone), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, \"Email: \", this.props.customer.email), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \"Discount: \", this.state.discountLevel), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, \"Total Visit: \", this.state.totalVisits), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"Total Spend: \", this.state.totalSpendings), \"Bookings:\", React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, bookings), React.createElement(\"button\", {\n        onClick: this.onDelete,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"Delete Customer\"), React.createElement(Link, {\n        to: '/customers/update/' + this.props.customer.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"Update Customer\")));\n    }\n  }]);\n\n  return SingleCustomer;\n}(Component);\n\nexport default SingleCustomer;","map":{"version":3,"sources":["/Users/andrewbrown/Documents/codeclan_work/week_14/day_5/Project/restaurant_booking_system/frontend/src/components/Customers/SingleCustomer.js"],"names":["React","Component","Link","SingleCustomer","props","state","totalSpend","visitCount","discountLevel","onDelete","bind","totalSpendings","totalVisits","handlesDelete","customer","id","request1","Request","get","then","data","setState","request2","visits","bookings","map","booking","index","date","name","phone","email"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAAgC,OAAhC;AACA,SAAQC,IAAR,QAAmB,kBAAnB;;IAEMC,c;;;;;AACJ,0BAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AAChB,wFAAMA,KAAN;AAEA,UAAKC,KAAL,GAAY;AACVC,MAAAA,UAAU,EAAE,EADF;AAEVC,MAAAA,UAAU,EAAE,EAFF;AAGVC,MAAAA,aAAa,EAAE;AAHL,KAAZ;AAMA,UAAKC,QAAL,GAAgB,MAAKA,QAAL,CAAcC,IAAd,uDAAhB;AACA,UAAKC,cAAL,GAAsB,MAAKA,cAAL,CAAoBD,IAApB,uDAAtB;AACA,UAAKE,WAAL,GAAmB,MAAKA,WAAL,CAAiBF,IAAjB,uDAAnB;AACA,UAAKF,aAAL,GAAqB,MAAKA,aAAL,CAAmBE,IAAnB,uDAArB;AAZgB;AAcjB;;;;+BAIQ;AACR,WAAKN,KAAL,CAAWS,aAAX,CAAyB,KAAKT,KAAL,CAAWU,QAAX,CAAoBC,EAA7C;AACD;;;qCAEe;AAAA;;AACd;AACC,UAAIC,QAAQ,GAAG,IAAIC,OAAJ,EAAf;AACAD,MAAAA,QAAQ,CAACE,GAAT,CAAa,mBAAkB,KAAKd,KAAL,CAAWU,QAAX,CAAoBC,EAAtC,GAA2C,iBAAxD,EAA2EI,IAA3E,CAAgF,UAACC,IAAD,EAAU;AACxF,QAAA,MAAI,CAACC,QAAL,CAAc;AAACf,UAAAA,UAAU,EAAEc;AAAb,SAAd,EADwF,CAExF;;AACD,OAHD;AAID;;;kCAEY;AAAA;;AACX;AACC,UAAIE,QAAQ,GAAG,IAAIL,OAAJ,EAAf;AACAK,MAAAA,QAAQ,CAACJ,GAAT,CAAa,mBAAkB,KAAKd,KAAL,CAAWU,QAAX,CAAoBC,EAAtC,GAA2C,aAAxD,EAAuEI,IAAvE,CAA4E,UAACC,IAAD,EAAU;AACpF,QAAA,MAAI,CAACC,QAAL,CAAc;AAACd,UAAAA,UAAU,EAAEa;AAAb,SAAd,EADoF,CAEpF;;AACD,OAHD;AAID;;;oCAEa;AACZ;AACA,UAAIG,MAAM,GAAG,KAAKlB,KAAL,CAAWE,UAAxB;;AACA,UAAGgB,MAAM,GAAC,EAAV,EAAa;AACX,aAAKF,QAAL,CAAc;AAACb,UAAAA,aAAa,EAAE;AAAhB,SAAd,EADW,CAEX;AACD,OAHD,MAGM,IAAGe,MAAM,GAAC,CAAV,EAAY;AAChB,aAAKF,QAAL,CAAc;AAACb,UAAAA,aAAa,EAAE;AAAhB,SAAd;AACD,OAFK,MAED;AACJ,aAAKa,QAAL,CAAc;AAACb,UAAAA,aAAa,EAAE;AAAhB,SAAd;AACA;AACD;;;6BAEG;AAEN,UAAG,CAAC,KAAKJ,KAAL,CAAWU,QAAf,EAAwB;AACtB,eAAO,IAAP;AACD;;AAGD,UAAMU,QAAQ,GAAG,KAAKpB,KAAL,CAAWU,QAAX,CAAoBU,QAApB,CAA6BC,GAA7B,CAAiC,UAACC,OAAD,EAAUC,KAAV,EAAoB;AACpE,eAAO;AAAI,UAAA,GAAG,EAAEA,KAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAiBD,OAAO,CAACE,IAAzB,CAAP;AACD,OAFgB,CAAjB;AAIA,aACE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAU,KAAKxB,KAAL,CAAWU,QAAX,CAAoBe,IAA9B,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAW,KAAKzB,KAAL,CAAWU,QAAX,CAAoBgB,KAA/B,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAW,KAAK1B,KAAL,CAAWU,QAAX,CAAoBiB,KAA/B,CAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAc,KAAK1B,KAAL,CAAWG,aAAzB,CAJF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAiB,KAAKH,KAAL,CAAWO,WAA5B,CALF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAiB,KAAKP,KAAL,CAAWM,cAA5B,CANF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACCa,QADD,CARF,EAWE;AAAQ,QAAA,OAAO,EAAE,KAAKf,QAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAXF,EAaE,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAE,uBAAuB,KAAKL,KAAL,CAAWU,QAAX,CAAoBC,EAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADA,CAbF,CADF;AAkBD;;;;EAnF4Bd,S;;AAuF7B,eAAeE,cAAf","sourcesContent":["import React, {Component}  from 'react';\nimport {Link} from 'react-router-dom';\n\nclass SingleCustomer extends Component {\n  constructor(props){\n    super(props);\n\n    this.state ={\n      totalSpend: \"\",\n      visitCount: \"\",\n      discountLevel: \"\"\n    }\n\n    this.onDelete = this.onDelete.bind(this);\n    this.totalSpendings = this.totalSpendings.bind(this);\n    this.totalVisits = this.totalVisits.bind(this);\n    this.discountLevel = this.discountLevel.bind(this);\n\n  }\n\n  \n\n onDelete(){\n   this.props.handlesDelete(this.props.customer.id)\n }\n\n totalSpendings(){\n   // let totalSpend;\n    let request1 = new Request()\n    request1.get('api/customers/'+ this.props.customer.id + '/totalSpendings').then((data) => {\n      this.setState({totalSpend: data})\n      // return totalSpend;\n    })\n  }\n\n  totalVisits(){\n    // let visitCount;\n     let request2 = new Request()\n     request2.get('api/customers/'+ this.props.customer.id + '/visitCount').then((data) => {\n       this.setState({visitCount: data})\n       // return visitCount;\n     })\n   }\n\n  discountLevel(){\n     // let visits = totalVisits();\n     let visits = this.state.visitCount;\n     if(visits>10){\n       this.setState({discountLevel: \"gold\"})\n       // discountLevel = \"gold\"\n     }else if(visits>5){\n       this.setState({discountLevel: \"silver\"})\n     }else{\n      this.setState({discountLevel: \"bronze\"})\n     }\n    }\n\nrender(){\n\n  if(!this.props.customer){\n    return null;\n  }\n\n\n  const bookings = this.props.customer.bookings.map((booking, index) => {\n    return <li key={index}>{booking.date}</li>\n  })\n\n  return (\n    <div className=\"component\">\n      <p>Name: {this.props.customer.name}</p>\n      <p>Phone: {this.props.customer.phone}</p>\n      <p>Email: {this.props.customer.email}</p>\n      <p>Discount: {this.state.discountLevel}</p>\n      <p>Total Visit: {this.state.totalVisits}</p>\n      <p>Total Spend: {this.state.totalSpendings}</p>\n      Bookings:\n      <ul>\n      {bookings}\n      </ul>\n      <button onClick={this.onDelete}>Delete Customer</button>\n\n      <Link to={'/customers/update/' + this.props.customer.id}>\n      <button>Update Customer</button></Link>\n    </div>\n  )\n}\n\n}\n\nexport default SingleCustomer;\n"]},"metadata":{},"sourceType":"module"}