{"ast":null,"code":"import _classCallCheck from \"/Users/stephenhart/Documents/Documents - Stephen\\u2019s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/stephenhart/Documents/Documents - Stephen\\u2019s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/stephenhart/Documents/Documents - Stephen\\u2019s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/stephenhart/Documents/Documents - Stephen\\u2019s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/stephenhart/Documents/Documents - Stephen\\u2019s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/stephenhart/Documents/Documents - Stephen\\u2019s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/stephenhart/Documents/Documents - Stephen\\u2019s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/src/containers/SingleCustomerContainer.js\";\nimport React, { Component } from 'react';\nimport SingleCustomer from '../components/Customers/SingleCustomer';\nimport Request from '../helpers/request';\n\nvar SingleCustomerContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SingleCustomerContainer, _Component);\n\n  function SingleCustomerContainer(props) {\n    var _this;\n\n    _classCallCheck(this, SingleCustomerContainer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SingleCustomerContainer).call(this, props));\n    _this.state = {\n      customer: null,\n      totalSpend: \"\",\n      visitCount: \"\",\n      discountLevel: \"\"\n    };\n    _this.handleDelete = _this.handleDelete.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.totalSpendings = _this.totalSpendings.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.totalVisits = _this.totalVisits.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.discountLevel = _this.discountLevel.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(SingleCustomerContainer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var request = new Request();\n      var url = '/api/customers/' + this.props.id + '?projection=embedToCustomer';\n      request.get(url).then(function (data) {\n        _this2.setState({\n          customer: data\n        });\n      });\n      this.totalSpendings();\n      this.totalVisits();\n      this.discountLevel();\n    }\n  }, {\n    key: \"handleDelete\",\n    value: function handleDelete(id) {\n      var url = '/api/customers/' + id;\n      var request = new Request();\n      request.delete(url).then(function () {\n        window.location = '/customers';\n      });\n    }\n  }, {\n    key: \"totalSpendings\",\n    value: function totalSpendings() {\n      var _this3 = this;\n\n      var request1 = new Request();\n      request1.get('api/customers/1/totalSpendings').then(function (data) {\n        _this3.setState({\n          totalSpend: data\n        });\n      });\n    }\n  }, {\n    key: \"totalVisits\",\n    value: function totalVisits() {\n      var _this4 = this;\n\n      var request2 = new Request();\n      request2.get('api/customers/1/visitCount').then(function (data) {\n        _this4.setState({\n          visitCount: data\n        });\n      });\n    }\n  }, {\n    key: \"discountLevel\",\n    value: function discountLevel() {\n      var visits = this.state.visitCount;\n\n      if (visits > 10) {\n        this.setState({\n          discountLevel: \"gold\"\n        });\n      } else if (visits > 5) {\n        this.setState({\n          discountLevel: \"silver\"\n        });\n      } else {\n        this.setState({\n          discountLevel: \"bronze\"\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(SingleCustomer, {\n        customer: this.state.customer,\n        discountLevel: this.state.discountLevel,\n        totalVisits: this.state.totalVisits,\n        totalSpendings: this.state.totalSpendings,\n        handleDelete: this.handleDelete,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return SingleCustomerContainer;\n}(Component);\n\nexport default SingleCustomerContainer;","map":{"version":3,"sources":["/Users/stephenhart/Documents/Documents - Stephenâ€™s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/src/containers/SingleCustomerContainer.js"],"names":["React","Component","SingleCustomer","Request","SingleCustomerContainer","props","state","customer","totalSpend","visitCount","discountLevel","handleDelete","bind","totalSpendings","totalVisits","request","url","id","get","then","data","setState","delete","window","location","request1","request2","visits"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport SingleCustomer from '../components/Customers/SingleCustomer';\nimport Request from '../helpers/request';\n\nclass SingleCustomerContainer extends Component {\n\n  constructor(props){\n    super(props)\n    this.state = {\n      customer: null,\n      totalSpend: \"\",\n      visitCount: \"\",\n      discountLevel: \"\"\n    }\n\n    this.handleDelete = this.handleDelete.bind(this);\n    this.totalSpendings = this.totalSpendings.bind(this);\n    this.totalVisits = this.totalVisits.bind(this);\n    this.discountLevel = this.discountLevel.bind(this);\n  }\n\n  componentDidMount(){\n    let request = new Request()\n    const url = '/api/customers/' + this.props.id + '?projection=embedToCustomer'\n    request.get(url).then(data => {\n      this.setState({customer: data})\n    })\n    this.totalSpendings();\n    this.totalVisits();\n    this.discountLevel();\n  }\n\n  handleDelete(id){\n    const url = '/api/customers/' + id;\n      let request = new Request()\n      request.delete(url).then(()=>{\n        window.location = '/customers'\n      })\n  }\n\n  totalSpendings(){\n     let request1 = new Request()\n     request1.get('api/customers/1/totalSpendings').then((data) => {\n       this.setState({totalSpend: data})\n     })\n   }\n\n   totalVisits(){\n      let request2 = new Request()\n      request2.get('api/customers/1/visitCount').then((data) => {\n        this.setState({visitCount: data})\n      })\n    }\n\n   discountLevel(){\n      let visits = this.state.visitCount;\n      if(visits>10){\n        this.setState({discountLevel: \"gold\"})\n      }else if(visits>5){\n        this.setState({discountLevel: \"silver\"})\n      }else{\n       this.setState({discountLevel: \"bronze\"})\n      }\n     }\n\n  render(){\n    return(\n    <SingleCustomer customer={this.state.customer} discountLevel={this.state.discountLevel} totalVisits={this.state.totalVisits} totalSpendings={this.state.totalSpendings} handleDelete={this.handleDelete}/>\n    )\n  }\n}\n\nexport default SingleCustomerContainer;\n"]},"metadata":{},"sourceType":"module"}