{"ast":null,"code":"import _classCallCheck from \"/Users/stephenhart/Documents/Documents - Stephen\\u2019s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/stephenhart/Documents/Documents - Stephen\\u2019s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/stephenhart/Documents/Documents - Stephen\\u2019s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/stephenhart/Documents/Documents - Stephen\\u2019s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/stephenhart/Documents/Documents - Stephen\\u2019s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/stephenhart/Documents/Documents - Stephen\\u2019s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/stephenhart/Documents/Documents - Stephen\\u2019s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/src/containers/TableContainer.js\";\nimport React, { Component } from 'react';\nimport TableList from '../components/Tables/TableList';\nimport TableForm from '../components/Tables/TableForm';\nimport Request from '../helpers/request';\n\nvar TableContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(TableContainer, _Component);\n\n  function TableContainer(props) {\n    var _this;\n\n    _classCallCheck(this, TableContainer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TableContainer).call(this, props));\n    _this.state = {\n      date: \"2018-12-11\",\n      time: 4,\n      partySize: 2,\n      data: [{\n        id: 1,\n        restaurant_id: 1,\n        bookings: [],\n        capacity: 4,\n        available: true\n      }, {\n        id: 2,\n        restaurant_id: 1,\n        bookings: [],\n        capacity: 2,\n        available: false\n      }]\n    };\n    _this.handleFormSubmit = _this.handleFormSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(TableContainer, [{\n    key: \"handleFormSubmit\",\n    value: function handleFormSubmit(partySize, date, time) {\n      this.setState({\n        partySize: partySize,\n        date: date,\n        time: time\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var request = new Request();\n      request.get('/api/booths').then(function (data) {\n        _this2.setState({\n          data: data._embedded.booths\n        });\n      });\n    }\n  }, {\n    key: \"getAllBookings\",\n    value: function getAllBookings() {\n      var allBookings = [];\n\n      for (var i = 1; i < 7; i++) {\n        var request = new Request();\n        request.get(\"/api/booths/\".concat(i, \"/bookings\")).then(function (data) {\n          allBookings.push(data._embedded.bookings);\n        });\n      }\n\n      return allBookings;\n    }\n  }, {\n    key: \"filterAllBookings\",\n    value: function filterAllBookings(getAllBookings) {\n      for (var i = 1; i < 7; i++) {\n        for (var booking in allBookings) {\n          if (booking.booth.id === i) {\n            if (booking.booth.capacity > this.state.partySize) {\n              if (booking.date !== this.state.date & booking.timeSlot !== this.state.time) {\n                console.log(\"\".concat(i), \"true\");\n                this.handleTableAvailabilityUpdate(i, {\n                  \"op\": \"replace\",\n                  \"value\": \"TRUE\"\n                });\n              }\n            }\n\n            console.log(\"\".concat(i), \"false\");\n            this.handleTableAvailabilityUpdate(i, {\n              \"op\": \"replace\",\n              \"value\": \"FALSE\"\n            });\n          }\n        }\n      }\n    }\n  }, {\n    key: \"handleTableAvailabilityUpdate\",\n    value: function handleTableAvailabilityUpdate(booth, path) {\n      var url = '/api/booths/' + booth + '/available';\n      var request = new Request();\n      request.patch(url, path).then(function (data) {\n        window.location = '/booths';\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.getAllBookings();\n      return React.createElement(React.Fragment, null, React.createElement(TableForm, {\n        onFormSubmit: this.handleFormSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \" \", this.state.date, this.state.time, this.state.partySize), React.createElement(TableList, {\n        data: this.state.data,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return TableContainer;\n}(Component);\n\n;\nexport default TableContainer;","map":{"version":3,"sources":["/Users/stephenhart/Documents/Documents - Stephenâ€™s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/src/containers/TableContainer.js"],"names":["React","Component","TableList","TableForm","Request","TableContainer","props","state","date","time","partySize","data","id","restaurant_id","bookings","capacity","available","handleFormSubmit","bind","setState","request","get","then","_embedded","booths","allBookings","i","push","getAllBookings","booking","booth","timeSlot","console","log","handleTableAvailabilityUpdate","path","url","patch","window","location"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport TableList from '../components/Tables/TableList';\nimport TableForm from '../components/Tables/TableForm';\nimport Request from '../helpers/request';\n\n\nclass TableContainer extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      date: \"2018-12-11\",\n      time: 4,\n      partySize: 2,\n      data:[{\n        id:1,\n        restaurant_id:1,\n        bookings:[],\n        capacity:4,\n        available:true\n      },\n      {\n        id:2,\n        restaurant_id:1,\n        bookings:[],\n        capacity:2,\n        available:false\n      }]\n    };\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n  };\n\n  handleFormSubmit(partySize, date, time){\n  this.setState({partySize: partySize, date: date, time:time});\n\n};\n\ncomponentDidMount(){\n   let request = new Request()\n   request.get('/api/booths').then((data) => {\n     this.setState({data: data._embedded.booths});\n   })\n }\n\ngetAllBookings(){\n  let allBookings = [];\n    for (var i = 1; i< 7; i++) {\n      let request = new Request()\n      request.get(`/api/booths/${i}/bookings`).then((data) => {\n        allBookings.push(data._embedded.bookings);\n      })\n    }\n    return allBookings;\n  }\n\n  filterAllBookings(getAllBookings){\n    for (var i = 1; i< 7; i++) {\n      for (var booking in allBookings){\n        if(booking.booth.id === i){\n          if(booking.booth.capacity > this.state.partySize){\n            if((booking.date !== this.state.date) & (booking.timeSlot !== this.state.time)){\n              console.log(`${i}`,\"true\")\n              this.handleTableAvailabilityUpdate(i, { \"op\": \"replace\", \"value\": \"TRUE\" })\n            }\n          }\n          console.log(`${i}`,\"false\")\n          this.handleTableAvailabilityUpdate(i, { \"op\": \"replace\", \"value\": \"FALSE\" })\n        }\n      }\n    }\n  }\n\n  handleTableAvailabilityUpdate(booth, path){\n   const url = '/api/booths/' + booth + '/available';\n   let request = new Request();\n   request.patch(url, path).then(data => {\n     window.location = '/booths'\n   })\n }\n\n  render(){\n    this.getAllBookings();\n    return(\n      <>\n      <TableForm onFormSubmit = {this.handleFormSubmit}/>\n        <p> {this.state.date}{this.state.time}{this.state.partySize}</p>\n      <TableList data={this.state.data}/>\n      </>\n    );\n  };\n};\n\nexport default TableContainer;\n"]},"metadata":{},"sourceType":"module"}