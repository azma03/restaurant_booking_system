{"ast":null,"code":"import _classCallCheck from \"/Users/stephenhart/Documents/Documents - Stephen\\u2019s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/stephenhart/Documents/Documents - Stephen\\u2019s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/stephenhart/Documents/Documents - Stephen\\u2019s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/stephenhart/Documents/Documents - Stephen\\u2019s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/stephenhart/Documents/Documents - Stephen\\u2019s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/stephenhart/Documents/Documents - Stephen\\u2019s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/stephenhart/Documents/Documents - Stephen\\u2019s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/src/containers/TableContainer.js\";\nimport React, { Component } from 'react';\nimport TableList from '../components/Tables/TableList';\nimport TableForm from '../components/Tables/TableForm';\nimport Request from '../helpers/request';\n\nvar TableContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(TableContainer, _Component);\n\n  function TableContainer(props) {\n    var _this;\n\n    _classCallCheck(this, TableContainer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TableContainer).call(this, props));\n    _this.state = {\n      date: \"\",\n      time: \"\",\n      partySize: \"\",\n      data: []\n    };\n    _this.handleFormSubmit = _this.handleFormSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(TableContainer, [{\n    key: \"handleFormSubmit\",\n    value: function handleFormSubmit(partySize, date, time) {\n      this.setState({\n        partySize: partySize,\n        date: date,\n        time: time\n      });\n      this.getAllBookings();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var request = new Request();\n      request.get('/api/booths').then(function (data) {\n        _this2.setState({\n          data: data._embedded.booths\n        });\n      });\n    } // getAllBookings(){\n    //   let requests = [];\n    //   for(let i = 1; i < 7; i++){\n    //     let request = new Request();\n    //     requests.push(request.get(`/api/booths/${i}/bookings`))\n    //   }\n    //   Promise.all(requests).then(responses => {\n    //\n    //\n    //     for(let i = 0; i < responses.length; i++){\n    //       let tableMatch;\n    //\n    //        if(responses[i]._embedded.bookings.length>0){\n    //         for (var booking of responses[i]._embedded.bookings){\n    //           if(booking.booth.capacity < 4){\n    //           // tableMatch.push(1)\n    //           this.setState({available: true})\n    //         }\n    // if((booking.date === \"2018-12-11\") & (booking.timeSlot === 5)){\n    //     tableMatch.push(1)\n    //   }\n    //   }\n    // }\n    // if(tableMatch.length > 0){\n    //   // http://localhost:8080/toggle_booth_availability/4\n    //   this.setState({available: false});\n    // }else{\n    // this.setState({available: true});\n    // }\n    //\n    //     };\n    //   });\n    // };\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(React.Fragment, null, React.createElement(TableForm, {\n        onFormSubmit: this.handleFormSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }), React.createElement(TableList, {\n        data: this.state.data,\n        available: this.state.available,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return TableContainer;\n}(Component);\n\n;\nexport default TableContainer;","map":{"version":3,"sources":["/Users/stephenhart/Documents/Documents - Stephenâ€™s MacBook Air/Codeclan/week15/restaurant_booking_system/frontend/src/containers/TableContainer.js"],"names":["React","Component","TableList","TableForm","Request","TableContainer","props","state","date","time","partySize","data","handleFormSubmit","bind","setState","getAllBookings","request","get","then","_embedded","booths","available"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,SAAP,MAAsB,gCAAtB;AACA,OAAOC,SAAP,MAAsB,gCAAtB;AACA,OAAOC,OAAP,MAAoB,oBAApB;;IAGMC,c;;;;;AACJ,0BAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AAChB,wFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACXC,MAAAA,IAAI,EAAE,EADK;AAEXC,MAAAA,IAAI,EAAE,EAFK;AAGXC,MAAAA,SAAS,EAAE,EAHA;AAIXC,MAAAA,IAAI,EAAC;AAJM,KAAb;AAMA,UAAKC,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBC,IAAtB,uDAAxB;AARgB;AASjB;;;;qCAEgBH,S,EAAWF,I,EAAMC,I,EAAK;AACvC,WAAKK,QAAL,CAAc;AAACJ,QAAAA,SAAS,EAAEA,SAAZ;AAAuBF,QAAAA,IAAI,EAAEA,IAA7B;AAAmCC,QAAAA,IAAI,EAACA;AAAxC,OAAd;AACA,WAAKM,cAAL;AACD;;;wCAEkB;AAAA;;AAChB,UAAIC,OAAO,GAAG,IAAIZ,OAAJ,EAAd;AACAY,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BC,IAA3B,CAAgC,UAACP,IAAD,EAAU;AACxC,QAAA,MAAI,CAACG,QAAL,CAAc;AAACH,UAAAA,IAAI,EAAEA,IAAI,CAACQ,SAAL,CAAeC;AAAtB,SAAd;AACD,OAFD;AAGD,K,CAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEQ;AACA;AACA;AACF;AACA;AAEA;AACA;AACA;AACA;AACA;AACF;AACJ;AACA;AACA;AACA;;;;6BAEU;AACN,aACE,0CACA,oBAAC,SAAD;AAAW,QAAA,YAAY,EAAI,KAAKR,gBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,EAGA,oBAAC,SAAD;AAAW,QAAA,IAAI,EAAE,KAAKL,KAAL,CAAWI,IAA5B;AAAkC,QAAA,SAAS,EAAE,KAAKJ,KAAL,CAAWc,SAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHA,CADF;AAOD;;;;EApE0BpB,S;;AAqE5B;AAGD,eAAeI,cAAf","sourcesContent":["import React, {Component} from 'react';\nimport TableList from '../components/Tables/TableList';\nimport TableForm from '../components/Tables/TableForm';\nimport Request from '../helpers/request';\n\n\nclass TableContainer extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      date: \"\",\n      time: \"\",\n      partySize: \"\",\n      data:[]\n    };\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n  };\n\n  handleFormSubmit(partySize, date, time){\n  this.setState({partySize: partySize, date: date, time:time});\n  this.getAllBookings();\n};\n\ncomponentDidMount(){\n   let request = new Request()\n   request.get('/api/booths').then((data) => {\n     this.setState({data: data._embedded.booths});\n   })\n }\n\n// getAllBookings(){\n//   let requests = [];\n//   for(let i = 1; i < 7; i++){\n//     let request = new Request();\n//     requests.push(request.get(`/api/booths/${i}/bookings`))\n//   }\n//   Promise.all(requests).then(responses => {\n//\n//\n//     for(let i = 0; i < responses.length; i++){\n//       let tableMatch;\n//\n//        if(responses[i]._embedded.bookings.length>0){\n//         for (var booking of responses[i]._embedded.bookings){\n//           if(booking.booth.capacity < 4){\n//           // tableMatch.push(1)\n//           this.setState({available: true})\n//         }\n\n        // if((booking.date === \"2018-12-11\") & (booking.timeSlot === 5)){\n        //     tableMatch.push(1)\n        //   }\n      //   }\n      // }\n\n      // if(tableMatch.length > 0){\n      //   // http://localhost:8080/toggle_booth_availability/4\n      //   this.setState({available: false});\n      // }else{\n      // this.setState({available: true});\n    // }\n//\n//     };\n//   });\n// };\n\n  render(){\n    return(\n      <>\n      <TableForm onFormSubmit = {this.handleFormSubmit}/>\n\n      <TableList data={this.state.data} available={this.state.available}/>\n      </>\n    );\n  };\n};\n\n\nexport default TableContainer;\n"]},"metadata":{},"sourceType":"module"}